$schema: "http://json-schema.org/draft-04/schema#"

id: "imaging_exam"
title: Imaging Exam
type: object
namespace: https://data.midrc.org/
category: medical_history
program: '*'
project: '*'
description: Information related to an imaging exam done for diagnostic or research.
  purposes.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: subjects
    backref: imaging_exams
    label: related_to
    target_type: subject
    multiplicity: many_to_one
    required: true

required:
  - submitter_id
  - type
  - subjects

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

properties:

  $ref: "_definitions.yaml#/ubiquitous_properties"

  days_to_exam:
    description: The number of days between the subject's index_date (e.g., diagnosis) and the imaging study.
    type: number

  hours_to_exam:
    description: The number of hours expired between the subject's index date (e.g., diagnosis) and the imaging study.
    type: number

  exam_description:
    description: General description of the imaging study.
    type: string

  exam_modality:
    description: The modality used in the imaging study (e.g., CT, CR, DX).
    type: string

  FLO2_percentage:
    description: The percentage of oxygen provided to the patient at the time of the exam.
    type: number

  radiologist_notes:
    description: Notes made by the radiologist during the imaging exam.
    type: string

  age_at_imaging:
    description: Age of the study subject in years at the time Imaging Exam was performed.
    type: integer
    maximum: 89
    minimum: 0

  age_at_imaging_gt89:
    description: Indicates whether the age of the subject when the Imaging Exam was
      performed is greater than 89 years
    enum:
      - "No"
      - "Yes"

  batch_number:
    description: Batch Number or ID for a batch of images or scans.
    type: string

  camera:
    description: Description of the camera used.
    type: string

  clinical_site_name:
    description: Clinical Site Name.
    type: string

  exam_start_time:
    description: Imaging Start Time.
    type: string

  exam_stop_time:
    description: Imaging Stop Time.
    type: string

  imaging_body_site:
    description: The site in the body of which the image was taken.
    type: string

  imaging_subtype:
    description: The imaging exam subtype.
    type: string

  imaging_type:
    description: The type of imaging exam performed.
    type: string

  injection_time:
    description: The time of injection with radiopharmaceuticals.
    type: string

  injection_volume:
    description: Volume of radiopharmaceutical injection in mL.
    type: number

  location_imaging_completed:
    description: Location where imaging was completed.
    type: string

  radiopharmaceutical:
    description: Indicate the radiopharmaceutical used for the imaging, if any.
    type: string

  scan_length:
    description: Number of time points in the scan.
    type: integer

  scan_year:
    description: Year when imaging was performed
    type: integer

  scanner_code:
    description: The code assigned to scanner or imaging technology platform at site.
    type: string

  scanner_manufacturer:
    description: The manufacturer of the imaging technology platform or scanner.
    type: string

  scanner_model:
    description: The specific model of the imaging technology platform or scanner.
    type: string

  subjects:
    $ref: "_definitions.yaml#/to_one"
